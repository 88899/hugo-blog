<!DOCTYPE html>
<html lang="zh-Hans"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务器磁盘排查工具终极指南：非运维也能轻松搞定磁盘问题 | 编程技术｜运维技术｜建站技巧｜后端开发｜前端开发｜知识库｜免费资源</title>

    
  
    <link href="/img/personal/avatar.png" rel="icon" type="image/x-icon" />
  


<link rel="canonical" href="https://googhub.nyc.mn/posts/2025/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%E9%9D%9E%E8%BF%90%E7%BB%B4%E4%B9%9F%E8%83%BD%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98/" />



<meta name="author" content="Sherry" />
<meta name="description" content="磁盘问题是日常工作中最常遇到的故障类型之一 —— 无论是磁盘空间莫名占满、I/O 读写卡顿，还是磁盘硬件提前老化，选对工具都能让排查效率翻倍" />


<meta name="keywords" content="技术,经验,运维">



<meta name="generator" content="Hugo 0.148.2">


<meta property="og:url" content="https://googhub.nyc.mn/posts/2025/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%E9%9D%9E%E8%BF%90%E7%BB%B4%E4%B9%9F%E8%83%BD%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98/">
  <meta property="og:site_name" content="编程技术｜运维技术｜建站技巧｜后端开发｜前端开发｜知识库｜免费资源">
  <meta property="og:title" content="服务器磁盘排查工具终极指南：非运维也能轻松搞定磁盘问题">
  <meta property="og:description" content="磁盘问题是日常工作中最常遇到的故障类型之一 —— 无论是磁盘空间莫名占满、I/O 读写卡顿，还是磁盘硬件提前老化，选对工具都能让排查效率翻倍">
  <meta property="og:locale" content="zh_Hans">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-22T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-10-22T00:00:00+00:00">
    <meta property="article:tag" content="技术">
    <meta property="article:tag" content="经验">
    <meta property="article:tag" content="运维">
    <meta property="og:image" content="https://googhub.nyc.mn/img/global-background.jpg">
      <meta property="og:see_also" content="https://googhub.nyc.mn/posts/2025/%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D%E5%92%8C%E8%A7%A3%E5%86%B3ubuntu-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E5%8D%A0%E7%94%A8%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E6%8E%92%E6%9F%A5%E4%B8%8E%E6%B8%85%E7%90%86%E6%8C%87%E5%8D%97/">
      <meta property="og:see_also" content="https://googhub.nyc.mn/posts/2025/%E5%9C%A8-linux-vps-%E4%B8%8A%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE-warp-cli-%E5%B9%B6%E9%80%9A%E8%BF%87-socks5-%E4%BB%A3%E7%90%86%E6%8E%A5%E5%85%A5-warp-%E7%BD%91%E7%BB%9C/">
      <meta property="og:see_also" content="https://googhub.nyc.mn/posts/2024/lade.io%E6%B3%A8%E5%86%8C%E5%88%B0%E6%90%AD%E5%BB%BA%E5%BA%94%E7%94%A8-%E5%B0%8F%E7%99%BD%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/">
      <meta property="og:see_also" content="https://googhub.nyc.mn/posts/2023/%E6%8B%BF%E5%88%B0hax%E7%9A%84eu-vps%E6%9C%80%E4%BD%B3%E8%A3%85%E6%9C%BA%E6%8C%87%E5%8D%97%E5%B0%8F%E7%99%BD%E7%99%BD/">
      <meta property="og:see_also" content="https://googhub.nyc.mn/posts/2023/%E4%BD%BF%E7%94%A8chatgpt%E8%8E%B7%E5%8F%96%E5%85%A8%E7%BD%91free-vps%E6%B8%85%E5%8D%95/">
      <meta property="og:see_also" content="https://googhub.nyc.mn/posts/2023/-%E5%A4%8D%E5%88%BBnl%E5%90%8C%E6%AC%BE%E8%AE%BA%E5%9D%9B%E5%9C%A8serv00%E6%89%93%E9%80%A0%E9%AB%98%E6%80%A7%E8%83%BD%E5%85%8D%E8%B4%B9%E7%A4%BE%E5%8C%BAserv00%E4%BB%B7%E5%80%BC%E6%9C%80%E5%A4%A7%E5%8C%96/">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://googhub.nyc.mn/img/global-background.jpg">
  <meta name="twitter:title" content="服务器磁盘排查工具终极指南：非运维也能轻松搞定磁盘问题">
  <meta name="twitter:description" content="磁盘问题是日常工作中最常遇到的故障类型之一 —— 无论是磁盘空间莫名占满、I/O 读写卡顿，还是磁盘硬件提前老化，选对工具都能让排查效率翻倍">
      <meta name="twitter:site" content="@dgdghub">




  

<link rel="stylesheet" href="/css/output.min.css" />




    
    <style>
         
        #loading {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .loader {
            width: 250px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: helvetica, arial, sans-serif;
            text-transform: uppercase;
            font-weight: 900;
            color: #00a96e;
            letter-spacing: 0.2em;
            user-select: none;
        }

        .loader::before,
        .loader::after {
            content: "";
            display: block;
            width: 15px;
            height: 15px;
            background: #00a96e;
            position: absolute;
            animation: load .7s infinite alternate ease-in-out;
            will-change: left, height, width;
        }

        .loader::before {
            top: 0
        }

        .loader::after {
            bottom: 0
        }

        @keyframes load {
            0% {
                left: 0;
                height: 30px;
                width: 15px
            }

            50% {
                height: 8px;
                width: 40px
            }

            100% {
                left: 235px;
                height: 30px;
                width: 15px
            }
        }

         
        #loading, #load-loading, .load-loading {
            justify-content: center;
            align-items: center;
            display: -webkit-box;
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999999;
            background: #fff;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            pointer-events: auto;
        }

        .load-loading {
            position: absolute;
            background: transparent
        }

        .load-loading .bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #000;
            opacity: 0.2
        }

        #load-loading {
            opacity: 0
        }

        #loading.close {
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none;
        }

        .io-black-mode #loading,
        .io-black-mode #load-loading {
            background: #111;
        }

        @media (prefers-reduced-motion: reduce) {
            .loader::before,
            .loader::after {
                animation: none;
            }

            #loading, #load-loading, .load-loading {
                transition: none;
            }
        }
    </style>

    
    <div id="loading" role="progressbar" aria-label="页面加载中">
        <div class="loader">AiEDU</div>
    </div>

    <script>
        
        (function() {
            const loadingScreen = document.getElementById('loading');
            if (!loadingScreen) return;

            function hideLoadingScreen() {
                if (!loadingScreen.classList.contains('close')) {
                    loadingScreen.classList.add('close');

                    
                    setTimeout(() => {
                        if (loadingScreen.parentNode) {
                            loadingScreen.parentNode.removeChild(loadingScreen);
                        }
                    }, 500);
                }
            }

            
            window.addEventListener('load', function() {
                const delay = window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : 300;
                setTimeout(hideLoadingScreen, delay);
            });

            
            window.addEventListener('beforeunload', function() {
                loadingScreen.classList.remove('close');
            });

            
            if (window.pjax) {
                document.addEventListener('pjax:send', function() {
                    loadingScreen.classList.remove('close');
                });

                document.addEventListener('pjax:complete', function() {
                    const delay = window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : 300;
                    setTimeout(hideLoadingScreen, delay);
                });
            }

            
            setTimeout(hideLoadingScreen, 8000);
        })();
    </script>





    


<link rel="stylesheet" data-custom-syntax-highlighting />
<style>
  .chroma {
    padding: 1em;
    background-color: var(--dream-pre-bg, #f5f5f5);
    border-radius: .5em;
    overflow: auto;
  }

  html.dark .chroma {
    background-color: var(--dream-pre-bg-dark, #262626);
  }
</style>









    
    <link rel="stylesheet" href="/css/custom.css" />
    

    
    <script defer src="/js/cdn.min.js"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav x-data="{ isSticky: false }"
  x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })"
  class="sticky top-0 z-30 mt-4 lg:mt-8 py-4"
  :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="翻转一下！">
        <div class="h-10 rounded-full">
          <img src="/img/personal/avatar.png" alt="AiEDU | BLOG" />
        </div>
      </div>

      
      <div>
        
        <a href="/" class="text-lg font-semibold cursor-pointer">
          AiEDU | BLOG
        </a>
        
        
        <div class="text-base-content/60 text-sm">AI 赋能，智启教育</div>
        
      </div>
      
    </section>

    
    
      
    

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md">
        






<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/" target="" title="首页">
    
    <ion-icon name="home"></ion-icon>
    
    首页
  </a>
</li>





<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="所有分类">
    <ion-icon name="grid"></ion-icon>
    所有分类
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="所有标签">
    <ion-icon name="pricetags"></ion-icon>
    所有标签
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="归档">
    <ion-icon name="archive"></ion-icon>
    归档
  </a>
</li>







<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="https://www.518855.xyz" target="" title="导航">
    
    <ion-icon name="rocket"></ion-icon>
    
    导航
  </a>
</li>








<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="https://cici.pp.ua" target="" title="文档">
    
    <ion-icon name="documents"></ion-icon>
    
    文档
  </a>
</li>





<li>
  <a class="group inline-flex items-center p-2 cursor-pointer" href="/search" title="搜索">
    <ion-icon name="search"></ion-icon>
    搜索
  </a>
</li>







<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="https://github.com/88899" target="" title="GitHub">
    
    <ion-icon name="logo-github"></ion-icon>
    
    GitHub
  </a>
</li>









<li>
  <div role="link" tabindex="0" class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title="关于">
    <ion-icon name="information-circle"></ion-icon>关于</div>
</li>



























      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      

      
      



  
  <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/" target="" title="首页">
    <ion-icon class="group-hover:text-primary-content" name="home"></ion-icon>
  </a>
  



      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="所有分类">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="所有标签">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="归档">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      



  
  <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://www.518855.xyz" target="" title="导航">
    <ion-icon class="group-hover:text-primary-content" name="rocket"></ion-icon>
  </a>
  



      
      



  
  <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://cici.pp.ua" target="" title="文档">
    <ion-icon class="group-hover:text-primary-content" name="documents"></ion-icon>
  </a>
  



      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/search" title="搜索">
  <ion-icon class="group-hover:text-primary-content" name="search"></ion-icon>
</a>


      
      



  
  <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://github.com/88899" target="" title="GitHub">
    <ion-icon class="group-hover:text-primary-content" name="logo-github"></ion-icon>
  </a>
  



      
      




<div role="link" tabindex="0" class="text-sm font-semibold cursor-pointer hover:underline" @click="flip = !flip" title="关于">关于</div>





      

      
      
















      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            
<div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4">


  <div class="lg:col-span-2">
    <article class="mx-auto prose prose-quoteless dark:prose-invert" id="dream-single-post-main" itemscope itemtype="http://schema.org/Article">
      
  <meta itemprop="name" content="服务器磁盘排查工具终极指南：非运维也能轻松搞定磁盘问题">
  <meta itemprop="description" content="磁盘问题是日常工作中最常遇到的故障类型之一 —— 无论是磁盘空间莫名占满、I/O 读写卡顿，还是磁盘硬件提前老化，选对工具都能让排查效率翻倍">
  <meta itemprop="datePublished" content="2025-10-22T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-10-22T00:00:00+00:00">
  <meta itemprop="wordCount" content="8374">
  <meta itemprop="image" content="https://googhub.nyc.mn/img/global-background.jpg">
  <meta itemprop="keywords" content="技术,经验,运维">

      <header>
        <h1 itemprop="headline">服务器磁盘排查工具终极指南：非运维也能轻松搞定磁盘问题</h1>
        <p class="text-sm">
          
            <span data-format="luxon">2025-10-22T00:00:00Z</span>
          

          | <span>17分钟阅读</span>

          
          | <span>更新于
            
              <span data-format="luxon">2025-10-22T00:00:00Z</span>
            </span>
          
        </p>

        
        <div class="flex justify-between">
          
            <div class="flex items-center">
  
  <div class="avatar mr-1">
    <div class="w-8 rounded-full">
      <img class="my-0!" src="https://s3.aiedu.qzz.io/website/2025/10/c9636914b0782ae3f9269b50dcb88659.png" alt="Sherry" />
    </div>
  </div>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">Sherry</span>
    
  
  </span>
</div>

          

          <div class="flex items-center gap-2">
  
  

  
  
  
  
    
  
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="" target="_blank" rel="noopener noreferrer"
      title="Share on WeChat">
      <ion-icon class="group-hover:text-primary-content" name="logo-WeChat"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://x.com/intent/post?text=%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%a3%81%e7%9b%98%e6%8e%92%e6%9f%a5%e5%b7%a5%e5%85%b7%e7%bb%88%e6%9e%81%e6%8c%87%e5%8d%97%ef%bc%9a%e9%9d%9e%e8%bf%90%e7%bb%b4%e4%b9%9f%e8%83%bd%e8%bd%bb%e6%9d%be%e6%90%9e%e5%ae%9a%e7%a3%81%e7%9b%98%e9%97%ae%e9%a2%98&amp;url=https://googhub.nyc.mn/posts/2025/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%E9%9D%9E%E8%BF%90%E7%BB%B4%E4%B9%9F%E8%83%BD%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener noreferrer"
      title="Share on X">
      <ion-icon class="group-hover:text-primary-content" name="logo-x"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://facebook.com/sharer/sharer.php?u=https://googhub.nyc.mn/posts/2025/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%E9%9D%9E%E8%BF%90%E7%BB%B4%E4%B9%9F%E8%83%BD%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener noreferrer"
      title="Share on Facebook">
      <ion-icon class="group-hover:text-primary-content" name="logo-facebook"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://wa.me/?text=%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%a3%81%e7%9b%98%e6%8e%92%e6%9f%a5%e5%b7%a5%e5%85%b7%e7%bb%88%e6%9e%81%e6%8c%87%e5%8d%97%ef%bc%9a%e9%9d%9e%e8%bf%90%e7%bb%b4%e4%b9%9f%e8%83%bd%e8%bd%bb%e6%9d%be%e6%90%9e%e5%ae%9a%e7%a3%81%e7%9b%98%e9%97%ae%e9%a2%98%20https://googhub.nyc.mn/posts/2025/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%E9%9D%9E%E8%BF%90%E7%BB%B4%E4%B9%9F%E8%83%BD%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E7%A3%81%E7%9B%98%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener noreferrer"
      title="Share on WhatsApp">
      <ion-icon class="group-hover:text-primary-content" name="logo-whatsapp"></ion-icon>
    </a>
  

  
  
</div>

        </div>
      </header>

      <section id="dream-single-post-content" itemprop="articleBody">
        
          <img class="w-full z-30" src="https://s3.aiedu.qzz.io/website/2025/10/f804cbd4633e6ab2b7927bf272ff5c9e.png" alt="服务器磁盘排查工具终极指南：非运维也能轻松搞定磁盘问题" />
        

        <p>磁盘问题是日常运维工作中最常遇到的故障类型之一，无论是磁盘空间莫名被占满了、I/O 读写卡顿，还是磁盘硬件老化了，选对工具都能让排查工作事半功倍。本文整合了当前主流的服务器磁盘排查工具，从基础操作到深度诊断全覆盖，每个工具都附带详细操作步骤和实战案例，即使是非运维专业的朋友，也能照着命令轻松上手。</p>
<pre tabindex="0"><code>🚀 如果你有这些痛点：不知道该用哪个、哪个更符合你当前的场景、哪个更好用、哪个能解决什么问题，那么这篇文章很适合你。
</code></pre><h2 id="一基础磁盘使用分析工具必备入门款">一、基础磁盘使用分析工具（必备入门款）</h2>
<h3 id="1-df---磁盘分区容量-晴雨表">1. df - 磁盘分区容量 “晴雨表”</h3>
<h4 id="核心定位">核心定位</h4>
<p>快速查看磁盘分区的总容量、已用空间、可用空间及挂载点，是排查 “磁盘满了” 的第一站，尤其擅长解决<strong>inode 耗尽</strong>（磁盘未满但无法创建文件）的隐性问题。</p>
<h4 id="易用性--受欢迎度">易用性 &amp; 受欢迎度</h4>
<p>★★★★★（系统自带，无需额外安装，运维必备）</p>
<h4 id="安装命令">安装命令</h4>
<p>无需安装，Linux/macOS 系统默认自带。</p>
<h4 id="核心用法参数详解">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>df -h</code></td>
          <td><code>-h</code>：人性化显示单位（KB/MB/GB），默认显示所有分区，最常用命令。</td>
      </tr>
      <tr>
          <td><code>df -i</code></td>
          <td><code>-i</code>：查看 inode 使用情况（inode 是文件索引，大量小文件会导致 inode 耗尽）。</td>
      </tr>
      <tr>
          <td><code>df -T</code></td>
          <td><code>-T</code>：显示分区的文件系统类型（如 ext4、xfs、ntfs），方便后续针对性修复。</td>
      </tr>
      <tr>
          <td><code>df /mnt/data</code></td>
          <td>只查看指定挂载点（/mnt/data）的分区信息，精准定位目标分区。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：快速检查所有分区容量</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>df -h
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（清晰看到各分区使用率，避免盲目清理）：</p>
<p>plaintext</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>Filesystem      Size  Used  Avail  Use%  Mounted on
</span></span><span style="display:flex;"><span>/dev/sda1       200G   80G   120G   40%   /
</span></span><span style="display:flex;"><span>/dev/sdb1       500G  480G   20G    96%   /mnt/data  # 该分区即将满，需清理
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>**案例 2：排查 “磁盘未满但无法创建文件”**当提示 “no space left on device” 但<code>df -h</code>显示有空间时，大概率是 inode 耗尽：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>df -i  <span style="color:#6272a4"># 查看inode使用率</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>若某分区<code>IUse%</code>为 100%，需删除大量小文件（如临时日志、缓存文件）释放 inode。</p>
</li>
</ul>
<h4 id="使用场景">使用场景</h4>
<ul>
<li>日常巡检磁盘容量，提前预警空间不足；</li>
<li>解决 “磁盘未满但无法创建文件” 的 inode 耗尽问题；</li>
<li>确认分区的文件系统类型，为后续修复做准备。</li>
</ul>
<h3 id="2-du---目录文件占用-探测器">2. du - 目录文件占用 “探测器”</h3>
<h4 id="核心定位-1">核心定位</h4>
<p>精准计算单个目录或文件的磁盘占用量，擅长定位 “哪些文件 / 目录吃了大量空间”，是清理磁盘的核心工具。</p>
<h4 id="易用性--受欢迎度-1">易用性 &amp; 受欢迎度</h4>
<p>★★★★★（系统自带，命令简洁，运维高频使用）</p>
<h4 id="安装命令-1">安装命令</h4>
<p>系统默认自带，无需额外安装。</p>
<h4 id="核心用法参数详解-1">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>du -sh /path</code></td>
          <td><code>-s</code>：只显示目录总大小；<code>-h</code>：人性化单位，快速查看目标目录总占用。</td>
      </tr>
      <tr>
          <td><code>du -ah /path</code></td>
          <td><code>-a</code>：显示所有文件（包括子文件）的大小；<code>-h</code>：人性化单位。</td>
      </tr>
      <tr>
          <td><code>du -c /path/*</code></td>
          <td><code>-c</code>：统计目录下所有子项大小，并在最后显示总和，方便对比。</td>
      </tr>
      <tr>
          <td><code>du -h --max-depth=1 /path</code></td>
          <td><code>--max-depth=1</code>：只显示 1 级子目录大小，避免层级过深导致输出混乱。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-1">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：快速定位大目录</strong>查找<code>/var</code>目录下占用空间最大的 1 级子目录：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>du -h --max-depth<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span> /var | sort -hr  <span style="color:#6272a4"># sort -hr：按大小倒序排列</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（直接找到占用最大的<code>/var/log</code>目录）：</p>
<p>plaintext</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>80G  /var/log
</span></span><span style="display:flex;"><span>20G  /var/lib
</span></span><span style="display:flex;"><span>5G   /var/cache
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>案例 2：查找大于 1GB 的文件</strong>精准定位大文件，方便清理：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>du -ah /home | grep -E <span style="color:#f1fa8c">&#39;^[0-9.]+G&#39;</span>  <span style="color:#6272a4"># grep过滤出大于1GB的文件</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-1">使用场景</h4>
<ul>
<li>磁盘空间告急时，快速定位大目录 / 大文件；</li>
<li>日常清理磁盘，筛选无用的超大文件（如旧备份、日志）；</li>
<li>确认某个应用的目录占用是否超出预期。</li>
</ul>
<h3 id="3-dust---现代版-du速度与颜值并存">3. dust - 现代版 du，速度与颜值并存</h3>
<h4 id="核心定位-2">核心定位</h4>
<p><code>du</code>的 Rust 重构版，速度更快，支持彩色层级输出，直观展示目录占用关系，擅长快速扫瞄大目录的子项占用情况。</p>
<h4 id="易用性--受欢迎度-2">易用性 &amp; 受欢迎度</h4>
<p>★★★★☆（安装简单，输出直观，近年备受推崇）</p>
<h4 id="安装命令-2">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install dust
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Fedora</span>
</span></span><span style="display:flex;"><span>sudo dnf install dust
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># macOS（Homebrew）</span>
</span></span><span style="display:flex;"><span>brew install dust
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 源码安装（需先安装Rust）</span>
</span></span><span style="display:flex;"><span>cargo install du-dust
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-2">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>dust</code></td>
          <td>默认显示当前目录子项大小，按占用降序排列，彩色区分层级。</td>
      </tr>
      <tr>
          <td><code>dust -s /path</code></td>
          <td><code>-s</code>：只显示目录总大小，不展开子目录，适合快速看总和。</td>
      </tr>
      <tr>
          <td><code>dust -n 5 /path</code></td>
          <td><code>-n 5</code>：只显示前 5 个最大的条目，避免输出过多。</td>
      </tr>
      <tr>
          <td><code>dust -d 2 /path</code></td>
          <td><code>-d 2</code>：限制目录展开深度为 2 级，聚焦核心目录。</td>
      </tr>
      <tr>
          <td><code>dust -r /path</code></td>
          <td><code>-r</code>：按占用大小升序排列，查看最小的子项（较少用）。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-2">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：查看<code>/var</code>目录前 3 个最大子项，深度限制 1 级</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dust -n <span style="color:#bd93f9">3</span> -d <span style="color:#bd93f9">1</span> /var
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（彩色层级，一目了然）：</p>
<p>plaintext</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>80G  ┌── /var/log
</span></span><span style="display:flex;"><span>20G  ├── /var/lib
</span></span><span style="display:flex;"><span>5G   ├── /var/cache
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>案例 2：按从小到大排序，查看当前目录总和</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dust -s -r
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-2">使用场景</h4>
<ul>
<li>追求高效和美观的磁盘占用扫瞄；</li>
<li>快速定位大目录的子项分布，比<code>du</code>更直观；</li>
<li>适合习惯可视化输出的用户。</li>
</ul>
<h3 id="4-duf---颜值担当的磁盘分区监控工具">4. duf - 颜值担当的磁盘分区监控工具</h3>
<h4 id="核心定位-3">核心定位</h4>
<p><code>df</code>的现代替代工具，以美观的表格形式展示磁盘分区信息，支持彩色区分使用率，擅长直观监控多个分区的整体状态。</p>
<h4 id="易用性--受欢迎度-3">易用性 &amp; 受欢迎度</h4>
<p>★★★★☆（安装简单，输出美观，适合日常巡检）</p>
<h4 id="安装命令-3">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install duf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Fedora</span>
</span></span><span style="display:flex;"><span>sudo dnf install duf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># macOS（Homebrew）</span>
</span></span><span style="display:flex;"><span>brew install duf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 二进制下载（官网：https://github.com/muesli/duf/releases）</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-3">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>duf</code></td>
          <td>默认显示所有分区信息，彩色表格，使用率越高颜色越红（绿色→黄色→红色）。</td>
      </tr>
      <tr>
          <td><code>duf /dev/sda1</code></td>
          <td>只显示指定设备（/dev/sda1）的信息，精准定位单个分区。</td>
      </tr>
      <tr>
          <td><code>duf -only ext4</code></td>
          <td>只显示 ext4 类型的分区，过滤无用信息。</td>
      </tr>
      <tr>
          <td><code>duf -sort avail</code></td>
          <td>按可用空间排序，快速找到剩余空间最多的分区。</td>
      </tr>
      <tr>
          <td><code>duf -json</code></td>
          <td>以 JSON 格式输出，方便脚本自动化处理（适合进阶用户）。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-3">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：日常巡检所有分区状态</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>duf
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（表格清晰，颜色预警，比<code>df</code>更易读）：</p>
<p>plaintext</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>Filesystem      Size  Used  Avail  Use%  Mounted on
</span></span><span style="display:flex;"><span>/dev/sda1       200G   80G   120G   40%   /          # 绿色
</span></span><span style="display:flex;"><span>/dev/sdb1       500G  480G   20G    96%   /mnt/data  # 红色（预警）
</span></span><span style="display:flex;"><span>tmpfs           3.9G  1.2G   2.7G   31%   /run       # 黄色
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>案例 2：只查看 ext4 分区，按可用空间排序</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>duf -only ext4 -sort avail
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-3">使用场景</h4>
<ul>
<li>日常磁盘巡检，快速掌握所有分区的占用状态；</li>
<li>对输出美观度有要求，需要颜色预警的场景；</li>
<li>简单的分区信息筛选（如按文件系统类型、大小排序）。</li>
</ul>
<h2 id="二磁盘-io-性能监控工具定位-io-瓶颈">二、磁盘 I/O 性能监控工具（定位 I/O 瓶颈）</h2>
<h3 id="1-iostat---io-性能分析-瑞士军刀">1. iostat - I/O 性能分析 “瑞士军刀”</h3>
<h4 id="核心定位-4">核心定位</h4>
<p>监控磁盘 I/O 吞吐量、使用率、响应时间等关键指标，擅长定位 “I/O 卡顿” 的根源，判断磁盘是否处于饱和状态。</p>
<h4 id="易用性--受欢迎度-4">易用性 &amp; 受欢迎度</h4>
<p>★★★★☆（功能强大，运维必备，略需理解指标）</p>
<h4 id="安装命令-4">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install sysstat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># CentOS/Fedora</span>
</span></span><span style="display:flex;"><span>sudo yum install sysstat
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-4">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>iostat -x 5</code></td>
          <td><code>-x</code>：显示扩展统计信息（关键指标）；<code>5</code>：每 5 秒刷新一次，持续输出。</td>
      </tr>
      <tr>
          <td><code>iostat -x 5 3</code></td>
          <td>每 5 秒刷新一次，共输出 3 次后退出（避免持续占用终端）。</td>
      </tr>
      <tr>
          <td><code>iostat -x -d sda</code></td>
          <td><code>-d</code>：只显示磁盘信息；<code>sda</code>：只监控 sda 磁盘，过滤其他设备。</td>
      </tr>
  </tbody>
</table>
<h4 id="关键指标解读">关键指标解读</h4>
<ul>
<li><code>%util</code>：磁盘使用率，接近 100% 说明磁盘 I/O 饱和（主要瓶颈）；</li>
<li><code>await</code>：I/O 请求平均响应时间（毫秒），数值越大说明磁盘响应越慢；</li>
<li><code>rMB/s</code>/<code>wMB/s</code>：每秒读写速度（兆字节），反映磁盘吞吐量。</li>
</ul>
<h4 id="实操案例-4">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：定位高 I/O 负载的磁盘</strong></p>
<p>当服务器卡顿，怀疑是磁盘 I/O 问题时：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>iostat -x <span style="color:#bd93f9">5</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>若输出中<code>/dev/sdb</code>的<code>%util</code>持续接近 100%，<code>await</code>超过 50ms，说明 sdb 磁盘是 I/O 瓶颈，需检查是否有高读写进程。</p>
</li>
</ul>
<h4 id="使用场景-4">使用场景</h4>
<ul>
<li>服务器卡顿、响应缓慢时，判断是否由磁盘 I/O 导致；</li>
<li>评估磁盘的读写性能，是否满足业务需求；</li>
<li>排查数据库、大数据等 I/O 密集型应用的性能问题。</li>
</ul>
<h3 id="2-iotop---可视化-抓包-高-io-进程">2. iotop - 可视化 “抓包” 高 I/O 进程</h3>
<h4 id="核心定位-5">核心定位</h4>
<p>实时显示进程的 I/O 使用情况，擅长精准找到 “吃 I/O” 的具体进程，是<code>iostat</code>的互补工具（<code>iostat</code>找磁盘，<code>iotop</code>找进程）。</p>
<h4 id="易用性--受欢迎度-5">易用性 &amp; 受欢迎度</h4>
<p>★★★★☆（交互式操作，直观易懂，运维高频工具）</p>
<h4 id="安装命令-5">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install iotop
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># CentOS/Fedora</span>
</span></span><span style="display:flex;"><span>sudo yum install iotop
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-5">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>iotop</code></td>
          <td>进入交互式界面，默认按 I/O 使用率排序。</td>
      </tr>
      <tr>
          <td><code>iotop -o</code></td>
          <td><code>-o</code>：只显示正在进行 I/O 操作的进程，过滤空闲进程，更高效。</td>
      </tr>
      <tr>
          <td><code>iotop -oP</code></td>
          <td><code>-P</code>：按 PID 排序，非交互式输出，适合脚本或后台监控。</td>
      </tr>
      <tr>
          <td><code>iotop -u root</code></td>
          <td><code>-u root</code>：只显示 root 用户的进程，精准定位特定用户的高 I/O 操作。</td>
      </tr>
  </tbody>
</table>
<h4 id="交互式操作键">交互式操作键</h4>
<ul>
<li><code>↑↓</code>：上下移动光标查看进程；</li>
<li><code>o</code>：切换 “只显示活跃 I/O 进程”；</li>
<li><code>P</code>：按 PID 排序；</li>
<li><code>q</code>：退出工具。</li>
</ul>
<h4 id="实操案例-5">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：找到写入量最大的进程</strong></p>
<p>服务器磁盘 I/O 饱和时，快速定位罪魁祸首：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>iotop -oP
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出中 “WRITE” 列数值最大的进程即为高写入进程，可通过<code>kill -9 &lt;PID&gt;</code>临时终止，或优化该进程的 I/O 逻辑。</p>
</li>
</ul>
<h4 id="使用场景-5">使用场景</h4>
<ul>
<li>磁盘 I/O 饱和时，精准定位高读写进程；</li>
<li>排查未知进程恶意占用磁盘 I/O 的问题；</li>
<li>监控特定用户或应用的 I/O 行为。</li>
</ul>
<h3 id="3-dstat---综合资源监控-一站式工具">3. dstat - 综合资源监控 “一站式工具”</h3>
<h4 id="核心定位-6">核心定位</h4>
<p>整合<code>iostat</code>、<code>vmstat</code>、<code>netstat</code>的功能，同时监控磁盘 I/O、CPU、内存、网络等资源，擅长快速判断服务器瓶颈是磁盘、CPU 还是内存导致。</p>
<h4 id="易用性--受欢迎度-6">易用性 &amp; 受欢迎度</h4>
<p>★★★☆☆（功能全面，略复杂，适合进阶排查）</p>
<h4 id="安装命令-6">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install dstat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># CentOS/Fedora</span>
</span></span><span style="display:flex;"><span>sudo yum install dstat
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-6">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>dstat -d</code></td>
          <td><code>-d</code>：只显示磁盘 I/O 统计（读 / 写速度），简化输出。</td>
      </tr>
      <tr>
          <td><code>dstat -d -D sda,sdb</code></td>
          <td><code>-D sda,sdb</code>：只监控 sda 和 sdb 磁盘，过滤其他设备。</td>
      </tr>
      <tr>
          <td><code>dstat -d -c -m</code></td>
          <td>同时显示磁盘 I/O（-d）、CPU（-c）、内存（-m），全面排查瓶颈。</td>
      </tr>
      <tr>
          <td><code>dstat 1 10</code></td>
          <td>每秒刷新一次，共输出 10 次后退出。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-6">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：同时监控磁盘 I/O 和 CPU，判断瓶颈</strong></p>
<p>服务器响应慢时，快速定位瓶颈类型：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dstat -d -c -m <span style="color:#bd93f9">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>若输出中磁盘<code>writ</code>/<code>read</code>数值持续很高，而 CPU<code>usr</code>/<code>sys</code>较低，说明瓶颈在磁盘；反之则是 CPU 瓶颈。</p>
</li>
</ul>
<h4 id="使用场景-6">使用场景</h4>
<ul>
<li>服务器综合性能排查，判断瓶颈是磁盘、CPU 还是内存；</li>
<li>实时监控多资源状态，适合复杂故障的初步定位；</li>
<li>替代多个工具的组合使用，提高排查效率。</li>
</ul>
<h2 id="三文件查找与占用分析工具解决-空间不释放-等问题">三、文件查找与占用分析工具（解决 “空间不释放” 等问题）</h2>
<h3 id="1-find---万能文件-搜索雷达">1. find - 万能文件 “搜索雷达”</h3>
<h4 id="核心定位-7">核心定位</h4>
<p>按大小、时间、类型等任意条件查找文件，擅长精准定位大文件、旧文件，是清理磁盘的核心工具之一。</p>
<h4 id="易用性--受欢迎度-7">易用性 &amp; 受欢迎度</h4>
<p>★★★★★（系统自带，功能强大，运维必备）</p>
<h4 id="安装命令-7">安装命令</h4>
<p>系统默认自带，无需额外安装。</p>
<h4 id="核心用法参数详解-7">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>find /path -type f -size +1G</code></td>
          <td><code>/path</code>：搜索路径；<code>-type f</code>：只找文件（排除目录）；<code>-size +1G</code>：大于 1GB。</td>
      </tr>
      <tr>
          <td><code>find /path -type d -name &quot;logs&quot;</code></td>
          <td><code>-type d</code>：只找目录；<code>-name &quot;logs&quot;</code>：按名称匹配 “logs” 目录。</td>
      </tr>
      <tr>
          <td><code>find /path -mtime +30</code></td>
          <td><code>-mtime +30</code>：查找 30 天前修改过的文件 / 目录。</td>
      </tr>
      <tr>
          <td><code>find /path -exec ls -lh {} \;</code></td>
          <td><code>-exec</code>：对找到的结果执行后续命令（此处是显示详细信息）。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-7">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：清理 30 天前的大日志文件</strong>查找<code>/var/log</code>下 30 天前、大于 100MB 的日志文件并列出（确认后可删除）：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># 先列出确认</span>
</span></span><span style="display:flex;"><span>find /var/log -type f -mtime +30 -size +100M -exec ls -lh <span style="color:#ff79c6">{}</span> <span style="color:#f1fa8c">\;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 确认无误后删除（谨慎使用！）</span>
</span></span><span style="display:flex;"><span>find /var/log -type f -mtime +30 -size +100M -exec rm -f <span style="color:#ff79c6">{}</span> <span style="color:#f1fa8c">\;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>案例 2：查找用户目录下的隐藏大文件</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>find ~/ -type f -name <span style="color:#f1fa8c">&#34;.*&#34;</span> -size +500M  <span style="color:#6272a4"># -name &#34;.*&#34; 匹配隐藏文件</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-7">使用场景</h4>
<ul>
<li>磁盘清理：定位大文件、旧文件、无用日志；</li>
<li>查找特定类型 / 名称的文件（如配置文件、备份文件）；</li>
<li>批量处理文件（如批量删除、批量移动）。</li>
</ul>
<h3 id="2-lsof---打开文件-侦探">2. lsof - 打开文件 “侦探”</h3>
<h4 id="核心定位-8">核心定位</h4>
<p>查看进程打开的所有文件，擅长解决 “删除文件后磁盘空间未释放” 的经典问题（文件被进程占用时，删除后仍占用空间）。</p>
<h4 id="易用性--受欢迎度-8">易用性 &amp; 受欢迎度</h4>
<p>★★★★☆（功能关键，略需理解进程与文件的关系）</p>
<h4 id="安装命令-8">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install lsof
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># CentOS/Fedora</span>
</span></span><span style="display:flex;"><span>sudo yum install lsof
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-8">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>`lsof</td>
          <td>grep deleted`</td>
          <td>查找被删除但仍被进程占用的文件（关键命令）。</td>
      </tr>
      <tr>
          <td><code>lsof /path/file</code></td>
          <td>查看指定文件被哪些进程占用，解决 “文件无法删除” 问题。</td>
          <td></td>
      </tr>
      <tr>
          <td><code>lsof -p 1234</code></td>
          <td><code>-p 1234</code>：查看 PID 为 1234 的进程打开的所有文件。</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-8">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：解决 “删除文件后空间不释放”</strong></p>
<ol>
<li>
<p>查找被占用的删除文件：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>lsof | grep deleted
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（第二列为进程 PID，最后一列为被删除的文件路径）：</p>
<p>plaintext</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>java    1234  root  10w  REG  8,1  1073741824  /tmp/old.log (deleted)
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>重启进程释放空间（或 kill 进程）：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">kill</span> -9 <span style="color:#bd93f9">1234</span>  <span style="color:#6272a4"># 谨慎！确保该进程可重启，生产环境优先重启服务而非强制kill</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
<li>
<p><strong>案例 2：查找占用某端口的进程</strong>（延伸用法，非磁盘相关，但常用）：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>lsof -i :8080  <span style="color:#6272a4"># 查找占用8080端口的进程</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-8">使用场景</h4>
<ul>
<li>磁盘空间删除后不释放，排查占用文件的进程；</li>
<li>无法删除文件 / 目录时，查找占用的进程；</li>
<li>查看进程打开的配置文件、日志文件等，辅助故障排查。</li>
</ul>
<h3 id="3-fuser---进程占用-快速定位器">3. fuser - 进程占用 “快速定位器”</h3>
<h4 id="核心定位-9">核心定位</h4>
<p>与<code>lsof</code>功能类似，但更简洁，擅长通过文件 / 目录快速反查占用的进程，适合快速 kill 占用进程（如卸载分区时提示 “设备忙”）。</p>
<h4 id="易用性--受欢迎度-9">易用性 &amp; 受欢迎度</h4>
<p>★★★☆☆（轻量快速，适合简单场景，补充<code>lsof</code>）</p>
<h4 id="安装命令-9">安装命令</h4>
<p>系统默认自带，无需额外安装。</p>
<h4 id="核心用法参数详解-9">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>fuser -v /path</code></td>
          <td><code>-v</code>：详细模式，显示占用<code>/path</code>的进程 PID、用户、进程名。</td>
      </tr>
      <tr>
          <td><code>fuser -k /path</code></td>
          <td><code>-k</code>：强制杀死占用<code>/path</code>的所有进程（谨慎使用！）。</td>
      </tr>
      <tr>
          <td><code>fuser -m /mnt</code></td>
          <td><code>-m</code>：查找占用<code>/mnt</code>挂载点的所有进程，适合卸载时用。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-9">实操案例</h4>
<ul>
<li><strong>案例 1：卸载分区时提示 “设备忙”，快速解决</strong>
<ol>
<li>
<p>查找占用<code>/mnt/external</code>挂载点的进程：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>fuser -v /mnt/external
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>杀死进程后卸载：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>fuser -k /mnt/external
</span></span><span style="display:flex;"><span>umount /mnt/external  <span style="color:#6272a4"># 此时可正常卸载</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
<h4 id="使用场景-9">使用场景</h4>
<ul>
<li>卸载磁盘分区时提示 “设备忙”，快速定位并杀死占用进程；</li>
<li>简单场景下替代<code>lsof</code>，快速查找文件 / 目录的占用进程；</li>
<li>批量杀死占用某资源的进程（需谨慎，避免误杀关键进程）。</li>
</ul>
<h3 id="4-ncdu---交互式磁盘清理-神器">4. ncdu - 交互式磁盘清理 “神器”</h3>
<h4 id="核心定位-10">核心定位</h4>
<p>基于终端的交互式磁盘分析工具，支持导航目录、直接删除大文件，擅长 “边查边清”，是非运维用户的友好工具。</p>
<h4 id="易用性--受欢迎度-10">易用性 &amp; 受欢迎度</h4>
<p>★★★★★（交互式操作，直观易懂，清理效率高）</p>
<h4 id="安装命令-10">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install ncdu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Fedora</span>
</span></span><span style="display:flex;"><span>sudo dnf install ncdu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># macOS（Homebrew）</span>
</span></span><span style="display:flex;"><span>brew install ncdu
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法交互式操作">核心用法（交互式操作）</h4>
<ol>
<li>启动扫描：<code>ncdu /path</code>（如<code>ncdu /home</code>，扫描指定目录）；</li>
<li>等待扫描完成（底部显示进度）；</li>
<li>交互式操作键：
<ul>
<li><code>↑↓</code>：上下移动光标；</li>
<li><code>Enter</code>：进入选中的目录；</li>
<li><code>d</code>：删除选中的文件 / 目录（需确认）；</li>
<li><code>s</code>：切换 “按大小排序”/“按名称排序”；</li>
<li><code>q</code>：退出工具。</li>
</ul>
</li>
</ol>
<h4 id="实操案例-10">实操案例</h4>
<ul>
<li><strong>案例 1：交互式清理<code>/home</code>目录的大文件</strong>
<ol>
<li>
<p>启动扫描：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncdu /home
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>扫描完成后，用<code>↑↓</code>找到占用最大的<code>Downloads</code>目录，按<code>Enter</code>进入；</p>
</li>
<li>
<p>找到无用的大文件（如<code>old_backup.iso</code>），按<code>d</code>，输入<code>y</code>确认删除；</p>
</li>
<li>
<p>清理完成后按<code>q</code>退出。</p>
</li>
</ol>
</li>
</ul>
<h4 id="使用场景-10">使用场景</h4>
<ul>
<li>可视化交互式清理磁盘，适合非运维用户；</li>
<li>边排查边删除，无需切换多个命令，效率高；</li>
<li>快速定位并清理大目录 / 文件，适合日常磁盘维护。</li>
</ul>
<h3 id="5-dutree---树形结构磁盘-可视化工具">5. dutree - 树形结构磁盘 “可视化工具”</h3>
<h4 id="核心定位-11">核心定位</h4>
<p>以树形结构展示目录大小，支持彩色区分文件类型，擅长直观展示目录层级关系，帮助理解文件系统的占用分布。</p>
<h4 id="易用性--受欢迎度-11">易用性 &amp; 受欢迎度</h4>
<p>★★★☆☆（树形展示清晰，适合理解目录结构，小众但实用）</p>
<h4 id="安装命令-11">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># 源码安装（需先安装Rust）</span>
</span></span><span style="display:flex;"><span>cargo install dutree
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Arch Linux（AUR）</span>
</span></span><span style="display:flex;"><span>yay -S dutree
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-10">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>dutree /path</code></td>
          <td>默认以树形展示<code>/path</code>的目录结构，彩色区分文件类型（目录蓝色、文件白色）。</td>
      </tr>
      <tr>
          <td><code>dutree -d 3 /path</code></td>
          <td><code>-d 3</code>：限制树形深度为 3 级，避免层级过深。</td>
      </tr>
      <tr>
          <td><code>dutree -s /path</code></td>
          <td><code>-s</code>：按大小排序（默认），最大的子项在最前面。</td>
      </tr>
      <tr>
          <td><code>dutree -n /path</code></td>
          <td><code>-n</code>：按文件数量排序，适合查找小文件密集的目录。</td>
      </tr>
      <tr>
          <td><code>dutree -a /path</code></td>
          <td><code>-a</code>：显示所有文件（包括隐藏文件）。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-11">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：查看当前目录的树形占用，深度 2 级</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dutree -d <span style="color:#bd93f9">2</span> -s
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（层级清晰，直观看到子目录占用）：</p>
<p>plaintext</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>. [10G]
</span></span><span style="display:flex;"><span>├── node_modules [5.2G]
</span></span><span style="display:flex;"><span>│  ├── react [800M]
</span></span><span style="display:flex;"><span>│  └── lodash [200M]
</span></span><span style="display:flex;"><span>├── dist [1.8G]
</span></span><span style="display:flex;"><span>│  ├── js [1.2G]
</span></span><span style="display:flex;"><span>│  └── css [600M]
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-11">使用场景</h4>
<ul>
<li>理解目录的层级占用关系，适合新手熟悉文件系统；</li>
<li>查找小文件密集的目录（按数量排序）；</li>
<li>喜欢树形可视化输出的用户，比<code>du</code>更易读。</li>
</ul>
<h2 id="四磁盘健康与故障检测工具预测硬件问题">四、磁盘健康与故障检测工具（预测硬件问题）</h2>
<h3 id="1-smartctl---磁盘健康-预警器">1. smartctl - 磁盘健康 “预警器”</h3>
<h4 id="核心定位-12">核心定位</h4>
<p>读取磁盘的 SMART（自监测、分析与报告技术）信息，擅长预测磁盘硬件故障（如坏道、寿命衰减），提前规避数据丢失风险。</p>
<h4 id="易用性--受欢迎度-12">易用性 &amp; 受欢迎度</h4>
<p>★★★☆☆（功能关键，略需专业知识，运维必备）</p>
<h4 id="安装命令-12">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install smartmontools
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># CentOS/Fedora</span>
</span></span><span style="display:flex;"><span>sudo yum install smartmontools
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-11">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>smartctl -i /dev/sda</code></td>
          <td><code>-i</code>：查看磁盘基本信息，确认是否支持 SMART（需显示 “SMART support is: Enabled”）。</td>
      </tr>
      <tr>
          <td><code>smartctl -H /dev/sda</code></td>
          <td><code>-H</code>：执行磁盘健康检测，输出 “PASSED” 为正常，“FAILED” 需立即更换磁盘。</td>
      </tr>
      <tr>
          <td><code>smartctl -a /dev/sda</code></td>
          <td><code>-a</code>：显示完整的 SMART 数据，包括坏道计数、使用寿命等详细指标。</td>
      </tr>
  </tbody>
</table>
<h4 id="关键指标解读-1">关键指标解读</h4>
<ul>
<li><code>Reallocated_Sector_Ct</code>：重新分配扇区数（坏道替换计数），数值越大说明磁盘坏道越多；</li>
<li><code>Power_On_Hours</code>：磁盘通电时间，可评估磁盘老化程度；</li>
<li><code>Temperature_Celsius</code>：磁盘温度，过高会影响寿命。</li>
</ul>
<h4 id="实操案例-12">实操案例</h4>
<ul>
<li>
<p><strong>案例 1：定期检查磁盘健康状态（可加入定时任务）</strong></p>
<ol>
<li>
<p>检查磁盘是否支持 SMART：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>smartctl -i /dev/sda
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>执行健康检测：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>smartctl -H /dev/sda
</span></span></code></pre></td></tr></table>
</div>
</div><p>若输出 “SMART overall-health self-assessment test result: PASSED”，说明磁盘健康；若为 “FAILED”，需立即备份数据并更换磁盘。</p>
</li>
</ol>
</li>
<li>
<p><strong>案例 2：查看磁盘详细健康数据</strong></p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>smartctl -a /dev/sda | grep -E <span style="color:#f1fa8c">&#39;Reallocated_Sector_Ct|Temperature_Celsius&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="使用场景-12">使用场景</h4>
<ul>
<li>日常磁盘健康巡检，提前预测硬件故障；</li>
<li>磁盘出现读写错误时，判断是否为硬件问题；</li>
<li>评估旧磁盘的使用寿命，决定是否更换。</li>
</ul>
<h3 id="2-badblocks---坏道-扫描仪">2. badblocks - 坏道 “扫描仪”</h3>
<h4 id="核心定位-13">核心定位</h4>
<p>扫描磁盘的物理坏道或逻辑错误，擅长定位 “文件读写失败” 的硬件根源，是<code>smartctl</code>的补充工具。</p>
<h4 id="易用性--受欢迎度-13">易用性 &amp; 受欢迎度</h4>
<p>★★★☆☆（功能专一，需谨慎操作，适合深度检测）</p>
<h4 id="安装命令-13">安装命令</h4>
<p>系统默认自带，无需额外安装。</p>
<h4 id="核心用法参数详解-12">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>badblocks -v /dev/sdb</code></td>
          <td><code>-v</code>：详细模式，扫描<code>/dev/sdb</code>的坏道（只读扫描，不破坏数据）。</td>
      </tr>
      <tr>
          <td><code>badblocks -wsv /dev/sdb</code></td>
          <td><code>-w</code>：破坏性读写扫描（会清空数据！）；<code>-s</code>：显示进度；<code>-v</code>：详细模式。</td>
      </tr>
  </tbody>
</table>
<h4 id="注意事项">注意事项</h4>
<ul>
<li>扫描前必须卸载分区（如<code>umount /dev/sdb1</code>），否则会损坏数据；</li>
<li>破坏性扫描（<code>-w</code>）仅用于空白磁盘或确认废弃的磁盘，切勿用于生产数据盘。</li>
</ul>
<h4 id="实操案例-13">实操案例</h4>
<ul>
<li><strong>案例 1：只读扫描磁盘坏道</strong>
<ol>
<li>
<p>卸载分区：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>umount /dev/sdb1
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>开始扫描：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>badblocks -v /dev/sdb
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出示例（无坏道则显示 “0 bad blocks found.”，有坏道会列出位置）。</p>
</li>
</ol>
</li>
</ul>
<h4 id="使用场景-13">使用场景</h4>
<ul>
<li>磁盘出现读写错误，怀疑有坏道时；</li>
<li>检测新磁盘的质量，确认是否有出厂坏道；</li>
<li>深度排查磁盘硬件故障，辅助判断是否需要更换磁盘。</li>
</ul>
<h2 id="五文件系统修复工具解决挂载--读写错误">五、文件系统修复工具（解决挂载 / 读写错误）</h2>
<h3 id="1-fsck---文件系统-修复大师">1. fsck - 文件系统 “修复大师”</h3>
<h4 id="核心定位-14">核心定位</h4>
<p>检查并修复文件系统错误（如断电导致的文件系统不一致），支持 ext、xfs 等多种文件系统，擅长解决 “分区无法挂载”“文件读写失败” 的逻辑错误。</p>
<h4 id="易用性--受欢迎度-14">易用性 &amp; 受欢迎度</h4>
<p>★★★★☆（功能关键，需谨慎操作，运维必备）</p>
<h4 id="安装命令-14">安装命令</h4>
<p>系统默认自带，无需额外安装。</p>
<h4 id="核心用法参数详解-13">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>fsck.ext4 -nv /dev/sda1</code></td>
          <td>针对 ext4 分区：<code>-n</code>：模拟修复（不实际修改）；<code>-v</code>：详细输出；适合先测试。</td>
      </tr>
      <tr>
          <td><code>fsck.ext4 -y /dev/sda1</code></td>
          <td><code>-y</code>：自动确认所有修复操作，无需手动输入（适合非交互式场景）。</td>
      </tr>
      <tr>
          <td><code>fsck.xfs /dev/sda2</code></td>
          <td>针对 xfs 分区（xfs 文件系统需用专用参数，不可用<code>-y</code>直接修复）。</td>
      </tr>
  </tbody>
</table>
<h4 id="注意事项-1">注意事项</h4>
<ul>
<li><strong>必须卸载分区后再运行</strong>，否则会严重损坏数据；</li>
<li>xfs 文件系统的修复需用<code>xfs_repair</code>工具，<code>fsck.xfs</code>仅做检查。</li>
</ul>
<h4 id="实操案例-14">实操案例</h4>
<ul>
<li><strong>案例 1：修复 ext4 分区的文件系统错误</strong>
<ol>
<li>
<p>卸载分区：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>umount /dev/sda1
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>先模拟修复，确认错误类型：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>fsck.ext4 -nv /dev/sda1
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>确认无误后实际修复：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>fsck.ext4 -y /dev/sda1
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>修复完成后重新挂载：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mount /dev/sda1 /mnt/data
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
<h4 id="使用场景-14">使用场景</h4>
<ul>
<li>分区无法挂载，提示文件系统错误；</li>
<li>服务器意外断电后，修复不一致的文件系统；</li>
<li>解决 ext 系列文件系统的读写错误（如文件损坏、目录丢失）。</li>
</ul>
<h3 id="2-xfs_repair---xfs-文件系统-专属修复工具">2. xfs_repair - XFS 文件系统 “专属修复工具”</h3>
<h4 id="核心定位-15">核心定位</h4>
<p>XFS 文件系统的专用修复工具，擅长解决 XFS 分区的挂载失败、文件系统损坏问题（主流 Linux 系统如 CentOS 7 + 默认使用 XFS）。</p>
<h4 id="易用性--受欢迎度-15">易用性 &amp; 受欢迎度</h4>
<p>★★★☆☆（针对性强，适合 XFS 系统，运维常用）</p>
<h4 id="安装命令-15">安装命令</h4>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Debian/Ubuntu</span>
</span></span><span style="display:flex;"><span>sudo apt install xfsprogs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># CentOS/Fedora</span>
</span></span><span style="display:flex;"><span>sudo yum install xfsprogs
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="核心用法参数详解-14">核心用法（参数详解）</h4>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>参数解释</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>xfs_repair /dev/sda2</code></td>
          <td>修复 XFS 分区（需先卸载），自动检测并修复错误。</td>
      </tr>
      <tr>
          <td><code>xfs_repair -n /dev/sda2</code></td>
          <td><code>-n</code>：只检查错误，不实际修复，适合先评估问题。</td>
      </tr>
      <tr>
          <td><code>xfs_repair -L /dev/sda2</code></td>
          <td><code>-L</code>：强制清除日志（谨慎使用！仅当日志损坏导致无法修复时用）。</td>
      </tr>
  </tbody>
</table>
<h4 id="实操案例-15">实操案例</h4>
<ul>
<li><strong>案例 1：修复无法挂载的 XFS 分区</strong>
<ol>
<li>
<p>卸载分区：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>umount /dev/sda2
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>检查错误：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>xfs_repair -n /dev/sda2
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>执行修复：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>xfs_repair /dev/sda2
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>重新挂载：</p>
<p>bash</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mount /dev/sda2 /mnt/xfs_data
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
<h4 id="使用场景-15">使用场景</h4>
<ul>
<li>XFS 分区无法挂载或提示文件系统错误；</li>
<li>服务器断电后，修复 XFS 文件系统的不一致；</li>
<li>补充<code>fsck</code>对 XFS 系统的支持不足。</li>
</ul>
<h2 id="六工具选择速查表按问题场景匹配">六、工具选择速查表（按问题场景匹配）</h2>
<table>
  <thead>
      <tr>
          <th>常见问题场景</th>
          <th>推荐工具</th>
          <th>星级参考</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>磁盘空间满了，找大文件 / 目录</td>
          <td><code>ncdu</code>、<code>dust</code>、<code>du</code>、<code>find</code></td>
          <td>★★★★★</td>
          <td></td>
      </tr>
      <tr>
          <td>磁盘未满但无法创建文件</td>
          <td><code>df -i</code>（排查 inode 耗尽）</td>
          <td>★★★★★</td>
          <td></td>
      </tr>
      <tr>
          <td>服务器卡顿，怀疑 I/O 瓶颈</td>
          <td><code>iostat</code>（找磁盘）+ <code>iotop</code>（找进程）</td>
          <td>★★★★☆</td>
          <td></td>
      </tr>
      <tr>
          <td>删除文件后空间不释放</td>
          <td>`lsof</td>
          <td>grep deleted<code>、</code>fuser`</td>
          <td>★★★★☆</td>
      </tr>
      <tr>
          <td>分区无法挂载，文件系统错误</td>
          <td><code>fsck</code>（ext）、<code>xfs_repair</code>（XFS）</td>
          <td>★★★★☆</td>
          <td></td>
      </tr>
      <tr>
          <td>怀疑磁盘硬件故障（坏道 / 老化）</td>
          <td><code>smartctl</code>、<code>badblocks</code></td>
          <td>★★★☆☆</td>
          <td></td>
      </tr>
      <tr>
          <td>日常巡检磁盘分区状态</td>
          <td><code>duf</code>、<code>df -h</code></td>
          <td>★★★★★</td>
          <td></td>
      </tr>
      <tr>
          <td>理解目录层级占用关系</td>
          <td><code>dutree</code>、<code>dust</code></td>
          <td>★★★☆☆</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h2 id="总结">总结</h2>
<p>服务器磁盘问题的排查核心是 “精准定位 + 对症工具”：基础问题用<code>df</code>/<code>du</code>，可视化清理用<code>ncdu</code>，I/O 瓶颈用<code>iostat</code>+<code>iotop</code>，硬件故障用<code>smartctl</code>，文件系统错误用<code>fsck</code>/<code>xfs_repair</code>。</p>
<p>本文的工具覆盖了从入门到进阶的所有场景，即使是非运维用户，只要照着命令和案例操作，也能轻松解决大部分磁盘问题。建议收藏本文，遇到问题时按需查找，让磁盘排查不再是难题！</p>



      </section>

      
      <div class="divider"></div>
      <div class="flex flex-col md:flex-row justify-between gap-4 py-4">
        
        <div></div>
        

        
        <a role="button" class="btn btn-outline h-12" href="/posts/2025/%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D%E5%92%8C%E8%A7%A3%E5%86%B3ubuntu-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A3%81%E7%9B%98%E5%8D%A0%E7%94%A8%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E6%8E%92%E6%9F%A5%E4%B8%8E%E6%B8%85%E7%90%86%E6%8C%87%E5%8D%97/" title="快速定位和解决Ubuntu 服务器磁盘占用问题，完整排查与清理指南">
          <div class="inline-flex flex-col items-end">
            <span class="text-base-content/60 text-xs font-normal">下一页</span>
            <span class="max-w-48 truncate">快速定位和解决Ubuntu 服务器磁盘占用问题，完整排查与清理指南</span>
          </div>
          <ion-icon name="chevron-forward"></ion-icon>
        </a>
        
      </div>
      

      
       

    </article>
  </div>

  <div
    x-data="tocHighlighter()"
    @scroll.window="debouncedScroll"
    class="hidden lg:flex lg:flex-col lg:items-end lg:self-start"
  >
    
      <nav id="TableOfContents">
  <ul>
    <li><a href="#一基础磁盘使用分析工具必备入门款">一、基础磁盘使用分析工具（必备入门款）</a>
      <ul>
        <li><a href="#1-df---磁盘分区容量-晴雨表">1. df - 磁盘分区容量 “晴雨表”</a></li>
        <li><a href="#2-du---目录文件占用-探测器">2. du - 目录文件占用 “探测器”</a></li>
        <li><a href="#3-dust---现代版-du速度与颜值并存">3. dust - 现代版 du，速度与颜值并存</a></li>
        <li><a href="#4-duf---颜值担当的磁盘分区监控工具">4. duf - 颜值担当的磁盘分区监控工具</a></li>
      </ul>
    </li>
    <li><a href="#二磁盘-io-性能监控工具定位-io-瓶颈">二、磁盘 I/O 性能监控工具（定位 I/O 瓶颈）</a>
      <ul>
        <li><a href="#1-iostat---io-性能分析-瑞士军刀">1. iostat - I/O 性能分析 “瑞士军刀”</a></li>
        <li><a href="#2-iotop---可视化-抓包-高-io-进程">2. iotop - 可视化 “抓包” 高 I/O 进程</a></li>
        <li><a href="#3-dstat---综合资源监控-一站式工具">3. dstat - 综合资源监控 “一站式工具”</a></li>
      </ul>
    </li>
    <li><a href="#三文件查找与占用分析工具解决-空间不释放-等问题">三、文件查找与占用分析工具（解决 “空间不释放” 等问题）</a>
      <ul>
        <li><a href="#1-find---万能文件-搜索雷达">1. find - 万能文件 “搜索雷达”</a></li>
        <li><a href="#2-lsof---打开文件-侦探">2. lsof - 打开文件 “侦探”</a></li>
        <li><a href="#3-fuser---进程占用-快速定位器">3. fuser - 进程占用 “快速定位器”</a></li>
        <li><a href="#4-ncdu---交互式磁盘清理-神器">4. ncdu - 交互式磁盘清理 “神器”</a></li>
        <li><a href="#5-dutree---树形结构磁盘-可视化工具">5. dutree - 树形结构磁盘 “可视化工具”</a></li>
      </ul>
    </li>
    <li><a href="#四磁盘健康与故障检测工具预测硬件问题">四、磁盘健康与故障检测工具（预测硬件问题）</a>
      <ul>
        <li><a href="#1-smartctl---磁盘健康-预警器">1. smartctl - 磁盘健康 “预警器”</a></li>
        <li><a href="#2-badblocks---坏道-扫描仪">2. badblocks - 坏道 “扫描仪”</a></li>
      </ul>
    </li>
    <li><a href="#五文件系统修复工具解决挂载--读写错误">五、文件系统修复工具（解决挂载 / 读写错误）</a>
      <ul>
        <li><a href="#1-fsck---文件系统-修复大师">1. fsck - 文件系统 “修复大师”</a></li>
        <li><a href="#2-xfs_repair---xfs-文件系统-专属修复工具">2. xfs_repair - XFS 文件系统 “专属修复工具”</a></li>
      </ul>
    </li>
    <li><a href="#六工具选择速查表按问题场景匹配">六、工具选择速查表（按问题场景匹配）</a></li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav>
    
  </div>
</div>


            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>
    © 2023 - 2025  -  AiEDU | BLOG
  </p>
  

  
  <p>知识改变命运，AI改变知识</p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  
  
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">关于我</div>

        <div class="prose dark:prose-invert">
          <p>Hi，这里是 <strong>AiEDU</strong> 的博客。<strong>AiEDU</strong> 是我在互联网上经常使用的名字。</p>
<p>我是一个热衷于开源的研发工程师，在这里我会记录一些关于技术等知识。欢迎你通过评论或者邮件与我交流。</p>

        </div>
      </div>
    </article>
  </div>
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">知识共享（Creative Commons）</div>

        <div class="prose dark:prose-invert">
          <p>此网站的所有内容都遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display: inline-flex; align-items: center; gap: 0.25rem; text-decoration: underline;">CC BY-NC-SA 4.0<img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a>。</p>
<p>All contents of this website are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display: inline-flex; align-items: center; gap: 0.25rem; text-decoration: underline;">CC BY-NC-SA 4.0<img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px; margin-top: 0; margin-bottom: 0;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a>.</p>

        </div>
      </div>
    </article>
  </div>
  
  

  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">社交链接</div>

        <ul class="menu menu-horizontal flex-wrap w-full px-0 [&_ion-icon]:text-lg">
  
  <li>
    <a href="mailto:aiedu985@gmail.com" title="Email">
      <ion-icon name="mail"></ion-icon>
    </a>
  </li>
  

  
  <li>
    <a href="https://github.com/88899" target="_blank" title="GitHub">
      <ion-icon name="logo-github"></ion-icon>
    </a>
  </li>
  
  <li>
    <a href="https://x.com/mykenwayne" target="_blank" title="X">
      <ion-icon name="logo-x"></ion-icon>
    </a>
  </li>
  
  <li>
    <a href="https://www.linkedin.com/in/mykenwayne" target="_blank" title="Linkedin">
      <ion-icon name="logo-linkedin"></ion-icon>
    </a>
  </li>
  
  <li>
    <a href="https://stackoverflow.com/users/5676489/mykenwayne" target="_blank" title="stack overflow">
      <ion-icon name="logo-stackoverflow"></ion-icon>
    </a>
  </li>
  
</ul>

      </div>
    </article>
  </div>
  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>
    © 2023 - 2025  -  AiEDU | BLOG
  </p>
  

  
  <p>知识改变命运，AI改变知识</p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme = "emerald"
  window.darkTheme = "forest"
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
    
  
  <script src="/js/grid.min.js"></script>




  

<script src="/js/main.min.js"></script>

    


  <script
  src="https://cdn.jsdelivr.net/npm/luxon@1.26.0"
  integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0="
  crossorigin="anonymous"
></script>
<script>
  format()

  function format() {
    document.querySelectorAll('span[data-format="luxon"]').forEach(el => {
      const date = el.textContent

      el.textContent = luxon.DateTime.fromISO(date, { locale: "zh" }).toFormat("yyyy年MM月dd日")
    })
  }
</script>



<script>
    window.customSyntaxHighlighting = {
      light: "/css/syntax-light.min.css",
      dark: "/css/syntax-dark.min.css"
    }

    document.addEventListener('alpine:initialized', () => {
      var isDark = Alpine.store('darkMode').isDark()
      var customSyntaxHighlightingUrl = isDark ? window.customSyntaxHighlighting.dark : window.customSyntaxHighlighting.light

      document
        .querySelector('link[data-custom-syntax-highlighting]')
        .setAttribute('href', customSyntaxHighlightingUrl)
    })
  </script>




  

<script src="/js/toc.min.js"></script>


  
    <script type="module">
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img', {
        background: 'oklch(var(--b1))',
        margin: 24,
      })
    </script>
  






    

    

    

    
    
      

<script async src="https://www.googletagmanager.com/gtag/js?id=G-7QPNK9FQQL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-7QPNK9FQQL');
</script>

    
        
    
<div class="scroll-buttons">
  <button id="scrollToTop" aria-label="滚动到顶部">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 19V5M5 12l7-7 7 7"/>
    </svg>
  </button>
  <button id="scrollToBottom" aria-label="滚动到底部">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 5v14M5 12l7 7 7-7"/>
    </svg>
  </button>
</div>

<style>
.scroll-buttons {
  position: fixed;
  right: 1rem;
  bottom: 1rem;  
  display: flex;
  flex-direction: column;
  gap: 0.6rem;  
  z-index: 99;
}

.scroll-buttons button {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  border: none;
  background-color: #28a745;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  transform: translateY(10px);
  box-shadow: 0 3px 12px rgba(40, 167, 69, 0.4);
}

.scroll-buttons button:hover {
  background-color: #218838;
  transform: translateY(0) scale(1.05);
  box-shadow: 0 4px 15px rgba(40, 167, 69, 0.5);
}

.scroll-buttons button.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

 
@media (max-width: 768px) {
  .scroll-buttons {
    right: 1rem !important;
    bottom: 1rem !important;  
    gap: 0.5rem !important;
  }

  .scroll-buttons button {
    width: 2.2rem !important;
    height: 2.2rem !important;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const scrollToTopBtn = document.getElementById('scrollToTop');
  const scrollToBottomBtn = document.getElementById('scrollToBottom');

  const handleScroll = () => {
    scrollToTopBtn.classList.toggle('visible', window.pageYOffset > 200);
    const isNearBottom = (window.innerHeight + window.pageYOffset) >= document.body.offsetHeight - 100;
    scrollToBottomBtn.classList.toggle('visible', !isNearBottom);
  };

  const scrollToTop = () => window.scrollTo({ top: 0, behavior: 'smooth' });
  const scrollToBottom = () => window.scrollTo({
    top: document.documentElement.scrollHeight || document.body.scrollHeight,
    behavior: 'smooth'
  });

  window.addEventListener('scroll', handleScroll);
  scrollToTopBtn.addEventListener('click', scrollToTop);
  scrollToBottomBtn.addEventListener('click', scrollToBottom);
  handleScroll();
});
</script>

    
    <script>
  window.difyChatbotConfig = {
    token: 'h2hkg50dPRmb7SaR',
    inputs: {},
    systemVariables: {},
    userVariables: {
      avatar_url: 'https://cdn.jsdelivr.net/gh/dgdghub/dg-pic@main/blog/20250829110345042.png',
      name: 'AiEDU',
    },
  }
</script>
<script src="https://udify.app/embed.min.js" id="h2hkg50dPRmb7SaR" defer></script>

<style>
   
  #dify-chatbot-bubble-button {
    background-color: #28a745 !important;
    position: fixed !important;
    bottom: 1rem !important;  
    right: 1rem !important;  
    z-index: 9999 !important;
    width: 2.5rem !important;  
    height: 2.5rem !important;  
    box-shadow: 0 3px 12px rgba(40, 167, 69, 0.4) !important;
    margin: 0 !important;
    padding: 0 !important;
  }

   
  #dify-chatbot-bubble-window {
    width: 24rem !important;
    height: 70vh !important;
    max-height: 600px !important;
    min-height: 400px !important;
    position: fixed !important;
    bottom: 1rem !important;  
    right: 1rem !important;
    top: auto !important;
    left: auto !important;
    z-index: 9998 !important;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2) !important;
    transform: none !important;
    margin: 0 !important;
    padding: 0 !important;
    background-color: rgba(255, 255, 255, 0.9) !important;
  }

   
  @media (max-width: 768px) {
    #dify-chatbot-bubble-window {
      width: calc(100vw - 2rem) !important;
      height: 65vh !important;
      bottom: 1rem !important;  
      right: 1rem !important;
      left: 1rem !important;
    }

    #dify-chatbot-bubble-button {
      width: 2.2rem !important;
      height: 2.2rem !important;
      bottom: 1rem !important;
      right: 1rem !important;
    }
  }

   
  @supports (padding: env(safe-area-inset-bottom)) {
    #dify-chatbot-bubble-button {
      bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
    }

    #dify-chatbot-bubble-window {
      bottom: calc(6.1rem + env(safe-area-inset-bottom)) !important;
    }

    @media (max-width: 768px) {
      #dify-chatbot-bubble-button {
        bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
      }

      #dify-chatbot-bubble-window {
        bottom: calc(4.3rem + env(safe-area-inset-bottom)) !important;
      }
    }
  }
</style>


    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js" integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin="anonymous"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js" integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin="anonymous"></script>
  </body>
</html>
